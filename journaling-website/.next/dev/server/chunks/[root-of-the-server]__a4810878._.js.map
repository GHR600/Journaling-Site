{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Journaling%20Site/journaling-website/app/api/waitlist/route.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\nimport { NextRequest, NextResponse } from 'next/server'\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n)\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { email } = await request.json()\n\n    // Basic validation\n    if (!email || !email.includes('@')) {\n      return NextResponse.json(\n        { error: 'Valid email required' },\n        { status: 400 }\n      )\n    }\n\n    // Insert to Supabase\n    const { data, error } = await supabase\n      .from('waitlist_emails')\n      .insert([{\n        email: email.toLowerCase().trim(),\n        source: 'landing_page',\n        metadata: {\n          userAgent: request.headers.get('user-agent'),\n          timestamp: new Date().toISOString(),\n        }\n      }])\n      .select()\n\n    if (error) {\n      // Handle duplicate email gracefully\n      if (error.code === '23505') {\n        return NextResponse.json(\n          { error: 'Email already registered' },\n          { status: 409 }\n        )\n      }\n      throw error\n    }\n\n    return NextResponse.json({ success: true, data })\n  } catch (error) {\n    console.error('Waitlist error:', error)\n    return NextResponse.json(\n      { error: 'Failed to join waitlist' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,WAAW,IAAA,yMAAY;AAKtB,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEpC,mBAAmB;QACnB,IAAI,CAAC,SAAS,CAAC,MAAM,QAAQ,CAAC,MAAM;YAClC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuB,GAChC;gBAAE,QAAQ;YAAI;QAElB;QAEA,qBAAqB;QACrB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,mBACL,MAAM,CAAC;YAAC;gBACP,OAAO,MAAM,WAAW,GAAG,IAAI;gBAC/B,QAAQ;gBACR,UAAU;oBACR,WAAW,QAAQ,OAAO,CAAC,GAAG,CAAC;oBAC/B,WAAW,IAAI,OAAO,WAAW;gBACnC;YACF;SAAE,EACD,MAAM;QAET,IAAI,OAAO;YACT,oCAAoC;YACpC,IAAI,MAAM,IAAI,KAAK,SAAS;gBAC1B,OAAO,gJAAY,CAAC,IAAI,CACtB;oBAAE,OAAO;gBAA2B,GACpC;oBAAE,QAAQ;gBAAI;YAElB;YACA,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAK;IACjD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA0B,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}